<div class="modal-header">
    <h4 ng-if="action == 'share'" translate>Share files</h4>
    <h4 ng-if="action == 'collect'" translate>Collect files</h4>
</div>

<div class="modal-body">

    <div style="margin-bottom:20px;text-align:center;">
        <a ng:click="create_dir()" class="pull-right">
            <i class="fas fa-folder-plus fa-2x"></i>
        </a>

        <a ng:click="back()" ng:show="current_path != init_path" class="pull-left">
            <i class="fas fa-arrow-left"></i>
        </a>

        <span ng-if="action == 'share'" translate>Select files you want to share</span>
        <span ng-if="action == 'copy'"  translate>Select files you want to copy</span>
        <span ng-if="action == 'move'"  translate>Select files you want to move</span>
    </div>

    <progress-spinner ng:show="items == null"></progress-spinner>

    <div class="alert alert-info" ng:show="files.length == 0">
        <span translate>No files or directories found in transfer.</span>
    </div>

    <div class="list-group">
        <div ng:repeat="item in items|orderBy:['-isDir', 'name']" class="list-group-item list-group-item-small" test-bind-item="{{item.name}}" ng:style="item.selected && {'background':'#ffc876'}">
            <a ng:click="delete_file(item.path)" class="list-group-btn" ng:if="item.isFile">
                <i class="fa fa-trash"></i>
            </a>
            <a ng:click="delete_dir(item.path)" class="list-group-btn" ng:if="item.isDir">
                <i class="fa fa-trash"></i>
            </a>
            <a ng:click="rename(item)" class="list-group-btn">
                <i class="fa fa-pen"></i>
            </a>
            <div class="list-group-addon pull-left">
                <span class="subtle" checkbox ng:model="item.selected"></span>
            </div>
            <a ng:click="load_path(item.path)" class="list-group-main" ng:if="item.isDir">
                <i class="fa fa-fw fa-folder"></i>
                {{item.name}}
            </a>
            <span class="list-group-main" ng:if="item.isFile">
                <i ng:class="get_file_icon(item.filetype)"></i>
                {{item.name}}
                <span class="subtle">{{item.size|bytes}}</span>
            </span>
        </div>
    </div>

    <span ng-if="action == 'share'">
        <h4 translate>Upload file</h4>
        <lm-drag-upload uploadpath="transferPath" movetohome="'true'" subdir="'transfer'" owner="owner" group="'users'" refresh="share"></lm-drag-upload>
    </span>
</div>

<div class="modal-footer">
    <span ng:if="action == 'share'">
        <a class="btn btn-default btn-flat" ng:click="save()" translate>Share</a>
    </span>
    <span ng:if="action == 'move' || action == 'copy'">
        <a class="btn btn-default btn-flat" ng:click="save()" translate>Collect from User</a>
    </span>
    <a class="btn btn-default btn-flat" ng:click="close()" translate>Cancel</a>
</div>
