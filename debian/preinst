#!/bin/sh
set -e

# Add Yarn repository and key
wget -qO- https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list

# Remove existing NodeSource repository if it exists
rm -f /etc/apt/sources.list.d/nodesource.list
mkdir -p /etc/apt/keyrings
rm -f /etc/apt/keyrings/nodesource.gpg

# Add NodeSource repository and key
wget -qO- https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg
NODE_MAJOR=18
echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_$NODE_MAJOR.x nodistro main" | sudo tee /etc/apt/sources.list.d/nodesource.list

exit 0
